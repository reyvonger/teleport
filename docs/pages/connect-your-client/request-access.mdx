---
title: Request Access to Resources
description: Explains how to request access to resources that your Teleport user does not have permissions to access.
---

If you cannot access a resource with your current Teleport permissions, you can
create an Access Request to obtain elevated permissions for a limited time.

Teleport users can request access to a Kubernetes resources by running the following
command:

```code
$ tsh request create RESOURCE_ID
```

The resource ID is the value you would see when listing resources with `tsh`,
such as running the `tsh apps ls` or `tsh db ls` commands.

## Requesting access to Kubernetes cluster resources

For resources in a Kubernetes cluster, such as a service or pod, Teleport uses
naming conventions to map the names of Kubernetes resources to IDs that users
can pass to `tsh request create`.

### Namespace-scoped Kubernetes resources

For Kubernetes namespaced resources, the `resource-id` is in the following format:

```
/TELEPORT_CLUSTER/NAMESPACED_KIND/KUBE_CLUSTER/NAMESPACE/RESOURCE_NAME
```

Teleport supports the following namespaced resources: `pod`, `secret`, `configmap`,
`service`, `serviceaccount`, `persistentvolumeclaim`, `deployment`, `replicaset`,
`statefulset`, `daemonset`, `kube_role`, `rolebinding`, `cronjob`, `job`,
`ingress`.

For example, to request access to a pod called `nginx-1` in the `development`
namespace, run the following command:

```code
$ tsh request create --resources /teleport.example.com/pod/mycluster/development/nginx-1
```

For the `NAMESPACE` and `RESOURCE_NAME` values, you can match ranges of characters by
supplying a wildcard (`*`) or regular expression. Regular expressions must begin
with `^` and end with `$`.

For example, to create a request to access all pods in all namespaces that match
the regular expression `/^nginx-[a-z0-9-]+$/`, run the following command:

```code
$ tsh request create --resources /teleport.example.com/pod/mycluster/*/^nginx-[a-z0-9-]+$
```

### Cluster-scoped Kubernetes resources

For Kubernetes cluster-scoped resources, the `resource-id` is in the following format:

```
/TELEPORT_CLUSTER/CLUSTER_WIDE_KIND/KUBE_CLUSTER/RESOURCE_NAME
```

Teleport supports the following cluster-wide resources: `namespace`, `kube_node`,
`clusterrole`, `clusterrolebinding`, `persistentvolume`, `certificatesigningrequest`.

For example, to request access to a namespace called `prod`, run the following command:

```code
$ tsh request create --resources /teleport.example.com/namespace/mycluster/prod
```

For the `RESOURCE_NAME` value, you can match ranges of characters by
supplying a wildcard (`*`) or regular expression. Regular expressions must begin
with `^` and end with `$`.

For example, to create a request to access all namespaces prefixed with `dev` match
the regular expression `/^dev-[a-z0-9-]+$/`, run the following command:

```code
$ tsh request create --resources /teleport.example.com/namespace/mycluster/^dev-[a-z0-9-]+$
```

Using cluster-scoped resource requests requires the role under `search_as_roles` to have the correct 
permissions for the cluster-scoped resource.  This is an example of the required permissions to
request access only to the namespace `prod` (and all resources within it):

```yaml
kind: role
spec:
  allow:
    kubernetes_resources:
    - kind: namespace
      name: prod
      verbs:
      - '*'
```

### Searching for Kubernetes resources

If a user has no access to a Kubernetes cluster, they can search the list of resources
in the cluster by running the following command:

```code
$ tsh request search --kind=<kind> --kube-cluster=<Var name="kube-cluster" /> \
[--kube-namespace=<Var name="namespace" />|--all-kube-namespaces]
Name               Namespace Labels    Resource ID
-----------------  --------- --------- ----------------------------------------------------------
nginx-deployment-0 default   app=nginx /teleport.example.com/pod/local/default/nginx-deployment-0
nginx-deployment-1 default   app=nginx /teleport.example.com/pod/local/default/nginx-deployment-1

To request access to these resources, run
> tsh request create --resource /teleport.example.com/pod/local/default/nginx-deployment-0 --resource /teleport.example.com/pod/local/default/nginx-deployment-1 \
    --reason <request reason>
```

The list returned includes the name of the resource, the namespace it is in if
applicable, its labels, and the resource ID.
Resources included in the list are those that match the `kubernetes_resources`
field in the user's `search_as_roles`. The user can then:

- Request access to the resources by running the command provided by the `tsh request
search` command.
- Edit the command to request access to a subset of the resources.
- Use a custom request with wildcards or regular expressions.

`tsh request search --kind=<kind>` works even if the user has no permissions to interact
 with the desired Kubernetes cluster, but the user's `search_as_roles` values
must allow access to the cluster. If the user is unsure of the name of the cluster,
they can run the following command to search it:

```code
$ tsh request search --kind=kube_cluster
Name  Hostname Labels Resource ID
----- -------- ------ ----------------------------------------
local                 /teleport.example.com/kube_cluster/local

```
